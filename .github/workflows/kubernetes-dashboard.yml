name: build-kubernetes-dashboard

on:
  workflow_dispatch:

#env:
#  GOPATH: "/tmp/go"

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository
        uses: actions/checkout@v3
      - name: Check out dashboard repository
        uses: actions/checkout@v3
        with:
          repository: kubernetes/dashboard
          path: dashboard
          ref: v2.7.0
      - name: Prepare for build
        run: |
           sudo apt-get update
           sudo apt-get -y upgrade
           go version
#           cd /tmp
#           curl -L https://golang.google.cn/dl/go1.19.7.linux-amd64.tar.gz -o go.tar.gz
#           tar zxf go.tar.gz
#           ls -l /tmp/go/
      - name: Build 
        run: |
           cd dashboard
           go version
           yarn
           make docker-build-release
#           export PATH=$PATH:$GOPATH/bin
#      - uses: actions/upload-artifact@v3
#        with:
#          name: dashboard
#          path: /tmp/*.tar.gz
